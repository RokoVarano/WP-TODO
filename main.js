(()=>{"use strict";let e=[];const t=(t,n,d)=>{e.push({description:t,completed:n,index:parseInt(d,10)})},n=()=>{const t=JSON.stringify(e);localStorage.setItem("tasks",t)},d=()=>{const d=document.querySelectorAll(".draggable");let a=0;d.forEach((e=>{e.setAttribute("task",a),a+=1})),e=[],d.forEach((e=>{const d=e.getElementsByClassName("description")[0].textContent,a=e.getElementsByClassName("completed")[0].checked,l=e.getAttribute("task");t(d,a,l),n()}))};(a=>{const l=document.querySelector("ul");l.appendChild((()=>{const e=document.createElement("li");e.id="title-box";const t=document.createElement("p");t.textContent="Today's To Do";const n=document.createElement("i");return n.classList.add("fas","fa-sync-alt"),n.id="refresh",e.appendChild(t),e.appendChild(n),e})());const r=t=>{const a=document.createElement("li");a.classList.add("draggable"),a.setAttribute("task",t.index),a.draggable=!0;const r=document.createElement("div"),s=document.createElement("input");s.classList.add("completed"),s.type="checkbox",s.name="completed",s.addEventListener("click",(()=>{return t=parseInt(a.getAttribute("task"),10),d=s.checked,e.find((e=>e.index===t)).completed=d,void n();var t,d}));const c=document.createElement("p");c.classList.add("description"),c.contentEditable="true",c.textContent=t.description,c.addEventListener("input",(()=>{return t=parseInt(a.getAttribute("task"),10),d=c.textContent,e.find((e=>e.index===t)).description=d,void n();var t,d})),r.appendChild(s),r.appendChild(c),a.appendChild(r);const i=document.createElement("i");return i.classList.add("fas","fa-trash-alt"),i.addEventListener("click",(()=>{l.removeChild(a),d()})),a.addEventListener("dragstart",(()=>{a.classList.add("flying")})),a.addEventListener("dragover",(e=>((e,t)=>{t.preventDefault(),e.classList.add("dragover")})(a,e))),a.addEventListener("dragleave",(()=>{a.classList.remove("dragover")})),a.addEventListener("drop",(()=>{(e=>{const t=document.querySelector(".flying");e.before(t),d(),e.classList.remove("dragover")})(a)})),a.addEventListener("dragend",(()=>{a.classList.remove("flying")})),a.appendChild(i),a};l.appendChild((()=>{const d=document.createElement("li");d.id="new-item-box";const a=document.createElement("input");return a.type="text",a.placeholder="Add to your list...",a.id="new-item",a.addEventListener("keydown",(d=>{if("Enter"===d.key){(d=>{let a=0;e.length>0&&(a=e[e.length-1].index+1),t(d,!1,a),n()})(a.value),l.appendChild(r(e[e.length-1]));const d=document.getElementById("clear");l.appendChild(d),a.value=""}})),d.appendChild(a),d})()),a.sort(((e,t)=>e.index>t.index?1:-1)),a.forEach((e=>l.appendChild(r(e)))),l.appendChild((()=>{const e=document.createElement("li");return e.textContent="Clear all completed",e.id="clear",e.addEventListener("click",(()=>{const e=[...document.querySelectorAll(".draggable")],t=e.filter((e=>!1===e.getElementsByClassName("completed")[0].checked));e.forEach((e=>l.removeChild(e))),t.forEach((e=>l.appendChild(e))),d();const n=document.getElementById("clear");l.appendChild(n)})),e})())})((()=>{let t=JSON.parse(localStorage.getItem("tasks"));return null==t&&(t=[]),e=t,e})())})();